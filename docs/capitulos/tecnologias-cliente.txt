.. _cliente:

#######################
Tecnologías del cliente
#######################

*********************************************
Web dinámica desde la perspectiva del cliente
*********************************************

Desde la perspectiva del usuario, la Web consiste en una gran cantidad de
documentos interconectados a nivel mundial llamados *páginas web* a los cuales
se accede mediante un navegador.

Cada uno de estos documentos está escrito en un lenguaje de marcado (o etiquetas), típicamente
HTML, que utiliza a su vez dos lenguajes:

 * CSS [*]_ para definir el estilo de las páginas de manera consistente.
 * Javascript para definir la interacción en la página.

.. [*] Cascading Style Sheet


JavaScript [WikiJavascript09]_ ha tenido durante mucho tiempo la reputación de lenguaje 
inadecuado para el desarrollo serio. Una de las razones fue que a pesar 
de los estándares impuestos por la ECMA [ECMAScript09]_,
los desarrolladores de navegadores realizaron sus propias variantes 
del lenguaje. como Microsoft en el implementación de  JScript [MSFTJScript09]_ para sus navegadores
IE. Un problema similar ocurrió con DOM, el mecanismo por el cual se interactúa con el documento y el navegador, 
estandarizado por la W3C. Sus versiones fueron nombradas como nivel DOM, existiendo nivel 0, 1, 2 y 3.
No todos los navegadores implementaron por completo los niveles, dando lugar a confusión e incompatibilidades.

Estos problemas relegaron a JavaScript a tareas prescindibles, como validación de formularios
en el cliente y efectos visuales simples.


.. [MSFTJScript09] *JScript*, Microsoft Developer Network, último acceso Septiembre de 2009, http://msdn.microsoft.com/es-es/library/72bd815a%28VS.80%29.aspx


.. [ECMAScript09] *Especificación ECMA", TC39 - ECMAScript (formerly TC39-TG1), último acceso de Agosto 09, http://www.ecma-international.org/memento/TC39.htm

.. [WikiJavascript09] *Javascript* http://es.wikipedia.org/wiki/JavaScript

A partir del aparición de la tecnología AJAX, los desarrolladores con intenciones
de ponerla en práctica diseñaron librerías de JavaScript que presentaran una API uniforme
que salvaba las incompatibilidades existentes.

Con la popularización de estas librerías, también lo hicieron herramientas de
depuración sofisticadas como Firebug. Conjunto que permitió realizar aplicaciones
más complejas y compatibles con la gran mayoría de los navegadores del mercado.

.. [Firebug09] *Firebug*, Plugin de depuración integral, último acceso Septiembre 2009, http://getfirebug.com/

Google lanzó en el 2007 un plugin para la mayoría de los navegadores populares
llamado Google Gears que agrega tres componentes:

 * Web Server
 
 	Un servidor de archivos que se ejecuta en el cliente.
 	
 * DataBase
 	
 	Una base de datos transaccional.
 
 * Worker Pool
 
 	Un mecanismo para la ejecución de javascript como procesos.

**************************
Estructura de un navegador
**************************

.. _navegador-web:

Navegador Web
=============
	
Es un software que presenta documentos de hipertexto al usuario.
Los lenguajes de codificación de hipertexto más populares son HTML y XHTML.

Un navegador no solo representa los documentos de hipertexto, sino
que puede también mostrar otros tipos de contenidos, como imágenes
(JPEG, GIF, PNG, etc.), sonido (WAV, MP3, OGG), vídeo (MPEG, H264, RM, MOV), 
así como también elementos interactivos como el caso de Macromedia Flash, 
applets Java o controles ActiveX en la plataforma Windows.
Debido a la cantidad de recursos que debe manejar un navegador, 
el servidor web agrega a cada respuesta al cliente una cabecera donde le indica 
el tipo de recurso que está entregando. Esta especificación se realiza con el 
estándar MIME.


Un navegador web acepta como entrada del usuario una URL.
Una vez validada, este descarga el recurso apuntado mediante el protocolo HTTP.

Una URL tiene el siguiente esquema, donde podemos diferenciar varios componentes

.. note:: Sacar el turquesa, gisE.

.. figure:: ../_svg/esquema_urls.png
    
    Forma de una URL.

Los componentes de una URL son:

	* Esquema
	
		Especifica el mecanismo de comunicación. Generalmente HTTP y HTTPS [*]_.
		
	* Anfitrión
	
		Especifica el nombre de dominio del servidor en Internet, por ejemplo:
		*google.com*, *nasa.gov*, *wikipedia.com*, etc.
		Se popularizó la utilización de el subdominio "www" para identificar el
		anfitrión
		que ejecuta el servidor web, dando lugar a direcciones del tipo
		*www.google.com*, *www.nasa.gov*, etc.
		
		El *puerto* es un parámetro de conexión TCP, y suele ser omitido debido
		a que el esquema suele determinarlo, siendo 80 para HTTP y 443 para HTTPS. 
		 
	* Recurso
	
		Especifica dentro del servidor, la ruta para acceder al recurso.
		
	* Query
	
		El parámetro query tiene sentido cuando el recurso apuntado por la ruta
		no se trata de una página estática y sirve para el pasaje de parámetros.
		El programa que genera el recurso puede recibir como argumentos estos
		parámetros, por ejemplo, cuando se ingresa la palabra *foo* en el buscador google,
		la URL que provee el resultado de la búsqueda es la siguiente::
			
			http://www.google.com/search?*q=foo*
		
	
	* Enlace
	
		Dentro de un documento de hipertexto pueden existir enlaces internos.
		Gracias a este parámetro se puede enlazar a una sección específica de un documento,
		permitiendo al navegador ubicarse visualmente.

.. [*] *Transport Security Layer* es el sucesor de *Secure Socket Layer* (SSL),
       es un protocolo criptográfico que provee conexiones seguras a través de una red, 
       típicamente Internet [WikiSSL2009]_ .

.. [WikiSSL2009] *Transport Layer Security*, Wikipedia, 2009, último acceso,
                 Agosto 2009.

Un navegador generalmente accede a documentos ubicados en la web, a
los cuales accede mediante el protocolo HTTP, sin embargo es posible 
acceder a documentos locales, donde el esquema suele ser **file** y
el anfitrión se encuentra ausente::
	
	file:///home/nacho/paginas/pepe.html

HTTP
====

Brevemente se describe el protocolo de transferencia de hipertexto.
Para acceder al recurso *archivos/curso_javascript.html* en
el servidor *students.unp.edu.ar*, de la url
http://students.unp.edu.ar/archivos/curso_javascript.html, el
navegador conforma la siguiente consulta::

	GET /archivos/curso_javascript.html HTTP/1.1
	Host: students.unp.edu.ar
	User-Agent: Mozilla/5.0
	Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
	Accept-Language: es-ar,en-us;q=0.7,en;q=0.3
	Accept-Encoding: gzip,deflate
	Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7
	Cookie: user_id=G7NVG5YY51I9DZAIJDEDQIXYQSRF0CTL

.. _http_request:

Esto conforma lo que se conoce como una consulta HTTP o *HTTP Request*. En la
primera linea se conforma de: el método HTTP y el nombre del recurso, finalizando con la
versión
del protocolo que soporta el navegador (o cliente)::
	
	GET /archivos/curso_javascript.html HTTP/1.1
	
La segunda linea es el host al cual se accede. Un mismo servidor web puede estar
publicado en varios dominios, mediante esta linea se puede discriminar a cual se
intenta acceder al recurso::

	Host: students.unp.edu.ar
	
El siguiente componente del *request* es la linea que identifica al cliente, en
este caso el navegador informa que se trata de Mozilla, versión 5::

	User-Agent: Mozilla/5.0


Una vez que el servidor web a localizado y accedido al recurso, procede a enviar
la respuesta generalmente es una página codificada en HTML.
	
.. _cliente-html:

HTML
====
HTML es un lenguaje de marcado que tiene como objetivo describir un documento
de hipertexto.
Un documento HTML se conforma por una serie de *tags* o etiquetas.

.. figure:: ../_svg/etiqueta_html.png
    
    Una etiqueta HTML.
 
Un documento HTML está delimitado por los *tags* *<html>* y contiene una
cabecera delimitada por *<head>* y un cuerpo, delimitado por *<body>*.

.. code-block:: html
	
	<html>
		<head>
			<title>Mi pagina</title>
		</head>
		<body>
			<h1>Título principal</h1> <!-- comentario -->
			<p>Párrafo</p>
		</body>
	</html>

Un documento HTML suele contener enlaces a recursos entendibles para el navegador,
como a las hojas de estilos o código javascript.

La inclusión de una hoja de estilo se realiza mediante el tag *link*, de la
siguiente manera:

.. code-block:: html

	<link type="text/css" rel="stylesheet" href="hoja_de_estilos.css">

Se puede además embeber en la página el estilo CSS, de la siguiente manera

.. code-block:: html

	<style type="text/css">
	
		BODY {
			font-family: "Verdana";
			font-size: 12pt;
			padding: 2px 2px 3px 2px;
		}
	</style>
	
Al incrustarse el estilo en una página en particular, este solo tiene
validez para ese recurso.

Mediante el tag *<script>* se incluye generalmente JavaScript, aunque es
posible utilizar otros lenguajes como VBScript en IE.

.. code-block:: html

	<script type="text/javscript" src="/medios/js/mi_codigo.js"></script>
	
De manera similar a lo que ocurre con el estilo, el código javascript se
puede embeber en el código html de varias maneras [StephenChapmanJS2009]_, entre
ellas:

.. code-block:: html

	<script type="text/javascript">
	<!-- // Javascript en un comentario, para pasar validadores XHTML y ocultar
		 // de navegadores
		 // que no soporten Javascript
		var x = 2;
		var y = 4;
	// -->
	</script> 

.. [StephenChapmanJS2009] *Javascript and XML*, Stephen Chapman, About.com,
                          último acceso Agosto 2009, http://javascript.about.com/library/blxhtml.htm


.. _cliente-css:

CSS
===

Una hoja de estilo (*stylesheet*) en cascada determina como se va a mostrar un documento 
en pantalla, como se va a imprimir o inclusive como se realiza la pronunciación a través de un
dispositivo de lectura [W3cCSS2009]_.

El objetivo de CSS es separar el contenido de la presentación de un documento
HTML o XML. Una *stylesheet* puede ser enlazada desde varias paginas, permitiendo 
mantener coherencia y consistencia en todo el sitio. 

.. [W3cCSS2009] *Guia breve de CSS*, W3C, español, último acceso Agosto 2009,
http://www.w3c.es/divulgacion/guiasbreves/HojasEstilo

.. _cliente-javascript:

JavaScript
==========

Javascript es un lenguaje de programación interpretado creado originalmente por
Brendan Eich para la empresa Netscape con el nombre de Mocha. Surge
a principios de 1996, como un lenguaje de scripting para la Web y apuntado a la
interacción directa con el usuario.

Con una sintaxis semejante a la de Java y C, JavaScript dista mucho de ser Java
y debe su nombre más a cuestiones de marketing que a principios de diseño, de
hecho se reconocen mayores influencias de lenguajes como Self, Scheme, Perl e
incluso en versiones modernas, Python.

HASTA ACÁ
------------

Orientado a Objetos
-------------------

JavaScript es un lenguaje orientado a objetos. Utiliza prototipos
en vez de clases. Estos se definen con una función [*]_, pero
para que ésta funcione como prototipo, se utiliza la palabra reservada
``new``. En tal caso, dentro del cuerpo de la función, la palabra reservada
``this`` apunta a la instancia que está siendo generada. La función
toma el comportamiento de lo que se conoce en los lenguajes de programación OO
como *constructor*. Por ejemplo:

.. code-block:: javascript

	function prototipo () {
		this.x = 1;
	}
	
	var instancia = new prototipo();

.. note:: Hablar de por que

Otra forma de definir una instancia es a través del tipo de dato llamado ``Object``[*]_, 
también conocido como arreglo asociativo.
Los arreglos asociativos consisten en asocaciones clave-valor y están presentes en varios lenguajes [*]_.

.. En JavaScript, este tipo de dato responde al operador punto ``.`` de la misma manera que al operador de indexación ``[]``
   y a veces es utilizado para definir objetos de una única instancia:

.. code-block:: javascript

	// Las llaves son un alias de "new Object()"
	var mi_instancia = {
		// Definción de un método
		mi_metodo: function () {
			alert(this.atributo);

		},
		// Definición de un atributo
		atributo: 3
	}

	mi_instancia.mi_metodo();
	
	

Tampoco está presente el ocultamiento de información, todos los métodos y atributos
son públicos.

.. [*] En JavaScript una función es una instancia de la clase Function
.. [*] En JavaScript la sintaxis ``{}`` es equivalente a escribir ``new Object()``.
.. [*] ``dict`` en Python, ``HashMap`` en Java, ``Dictinary`` en SmallTalk, ``Hash`` en Ruby.


Un objeto se puede crear de varias maneras:

.. code-block:: javascript

    var uno = new Object();	// Mediante el constructor
    uno['a'] = 3;			// Asignacion equivalente
    uno.b = 4;				// Asignación equivalente
    
    var dos = {};			// Mediante la sintaxis abreviada
    dos['a'] = 3;			// Asignacion equivalente
    dos.b = 4;				// Asignación equivalente

Las caracteristicas dinámicas de lenguaje posibilitan la modificación de los
objetos en tiempo de ejecución, esto quiere decir que a un objeto, luego de ser
creado, se le pueden agregar o eliminar métodos y propiedades:

.. code-block:: javascript

    uno.variable = “hola”;
    dos.metodo = function () { this.c = 3; }

El resultado de la ejecución del código previo son dos objetos, ``uno`` y ``dos``,
personalizados uno con un atributo y otro con un "metodo".
Sin embargo esta forma de definir un objeto sobre la marcha es inadecuada
para la creación instancias, tarea para la cual son más adecuados
los prototipos.

Una vez aclaradas las diferencias entre los prototipos, se utilizará el
término *clase* y *prototipo* de manera indistinta.

En JavaScript se pueden generar funciones anónimas, conocidas en otros lenguajes
como expresiones *lambda*. Utilizando esta característica, se puede lograr
una definción de prototipos más cercana a la sintaxis de otros lenguajes OO.

.. code-block:: javascript

    /*clase de ejemplo*/

    Clase = function() {
        this.propiedad = “hola!”;
        this.metodo = function(){
            alert(this.propiedad);
        }
    }
    objeto = new Clase(); // instanciamos ‘Clase’

Esta primera aproximación posee una importante desventaja: cada
instancia posee una nueva versión de los métodos.

Para lograr una unificación del protipo al cual pertenecen las instancias
todas las funciones tienen una propiedad llamada *prototype*. 
Esta propiedad es un Object que será utilizado como ‘modelo’ inicial de todos los objetos que sean
creados cuando esta función cuando sea utilizada como constructor.

Reescribiendo el ejemplo anterior el código quedaría así:

.. code-block:: javascript

    /* creamos un constructor limpio */

    Clase = new Function();
    Clase.prototype.propiedad = “hola!”;
    Clase.prototype.metodo = function(){
        alert(this.propiedad);
    }
    objeto = new Clase(); // instanciamos ‘miClase’

En este ejemplo, todos los objetos creados a partir de ‘Clase’ comparten las
mismas referencias en todas sus propiedades, esto significa que, todos los
objetos van a compartir la misma versión de cada ‘metodo’.

Adicionalmente, al utilizar la propiedad prototype, se obtiene otra ventaja y es
poder usar la palabra reservada instanceof para determinar si un objeto es
instancia de un constructor:

.. code-block:: javascript
	
	var instancia = new Clase();
	instanceof(instancia, Clase); // -> true


.. http://javis.wordpress.com/2006/10/23/javascript-orientado-a-objetos/

************************
Evolución del JavaScript
************************

A continuación se describen algunas características que se han agregado
a ECMAScript a lo largo de las versiones.

Herencia
========

Javascript posee herencia basada en prototipos, pero existen muchas versiones
de implementarla. Se describen a continuación las técnicas más populares.


Object Masquerading
-------------------

Este método saca provecho del comportamiento de la palabra reservada this
dentro de los constructores.
El funcionamiento es el siguiente: Un constructor asigna propiedades y métodos
a un objeto referenciándolo con la palabra clave *this*. Como un constructor
es una función, esta puede ser invocada desde una "subclase".

Definendo a la clase A como siguie:

.. code-block:: javascript
    
    function ClaseA(nombre){
        this.nombre = nombre;
        this.identificarse = function(){
            alert(this.nombre);
        }
    }

Recordemos que en un constructor, this hace referencia al nuevo objeto que será
retornado. Pero en un método, this hace referencia al objeto desde el cual fue
llamado.

.. code-block:: javascript
     
    function ClaseB(nombre){
        this.superClase = ClaseA;
        this.superClase(nombre);
        delete this.superClase;
    }

En el código anterior, el constructor ‘ClaseA’, es llamado como método del nuevo
objeto que se esta creando en ‘ClaseB’, por lo tanto, todas las propiedades y
métodos que se crean en ClaseA se añaden a las instancias de ClaseB.


*Object Masquerading* permite, por su forma de invocar a los "superconstructores",
implementar herencia múltiple, basta con llamar cuantos constructores sean necesarios.
Al no trabajar con la propiedad *prototype*, *instanceof* no es utilizable y persiste
el problema de las múltiples versiones de los métodos.

Prototype Chaining
------------------

Anteriormente se mostró como definir clases utilizando el objeto prototype.
*Prototype Chaining* se basa en este objeto y es el método recomendado por el
standard ECMA Script.
El atributo *prototype* de el objeto Function es pasado a todas las instancias
cuando la función se invoca como constructor.

La idea trás Prototype Chaining es generar una instancia de la clase base
como instancia inicial del prototipo de la subclase.

Modificando el ejemplo anterior para utilizar Prototype Chaining obtenemos
el siguiente código.

.. code-block:: javascript

    function ClassA() {}
    ClassA.prototype.nombre = “”;
    ClassA.prototype.identificarse = function() {
        alert(this.nombre);
    }
    function ClassB() {}    
    ClassB.prototype = new ClassA();

Este método posee la desventaja que no es posible invocar el constructor
con parámetros, pero habilita la utilización de la función *instanceof*:

.. code-block:: javascript

    var miobjeto = new ClassB();
    alert(miobjeto instanceof ClassB); // true
    alert(miobjeto instanceof ClassA); // true


AJAX
====


La expansión y masificación de la Web, llevó a que el ciclo de petición
respuesta en el navegador resultara insuficiente para proveer al usuario de
aplicaciones interactivas o :term:´RIA´, por este motivo se comenzo a trabajar
sobre nuevas técnica de desarrollo que culminaron el en nacimiento de AJAX,
acrónimo de Asynchronous JavaScript And XML (JavaScript asíncrono y XML).

Una aplicacion Web que trabaje con AJAX se ejecutan en el cliente o navegador y
mantiene una comunicación asíncrona con el servidor en segundo plano. De esta
forma le es posible realizar cambios sobre las páginas sin necesidad de
recargarla, lo que significa un aumento de la interactividad, velocidad y
usabilidad en las aplicaciones.

AJAX es una tecnología asíncrona, en el sentido de que los datos adicionales se
requieren al servidor y se cargan en segundo plano sin interferir con la
visualización ni el comportamiento de la página. JavaScript es el lenguaje en el
que normalmente se efectúan las funciones de llamada de AJAX mientras que el
acceso a los datos se realiza mediante XMLHttpRequest. En cualquier caso, no es
necesario que el contenido asíncrono esté formateado en XML.

En la practica AJAX no constituye una tecnología en sí, sino que es
un término que engloba a éstas cuatro tecnologías:

    * XHTML (o HTML) y hojas de estilos en cascada (CSS) para el diseño que
acompaña a la información.
    * Document Object Model (DOM) accedido con un lenguaje de scripting por
parte del usuario, especialmente implementaciones ECMAScript como JavaScript y
JScript, para mostrar e interactuar dinámicamente con la información presentada.
    * El objeto XMLHttpRequest para intercambiar datos de forma asíncrona con el
servidor web. En algunos frameworks y en algunas situaciones concretas, se usa
un objeto iframe en lugar del XMLHttpRequest para realizar dichos intercambios.
    * XML es el formato usado generalmente para la transferencia de datos
solicitados al servidor, aunque cualquier formato puede funcionar, incluyendo
HTML preformateado, texto plano, JSON y hasta EBML.

Funcionamiento de AJAX
----------------------

	# Se crea y configura un objeto XMLHttpRequest.
	# El objeto XMLHttpRequest realiza una llamada al servidor.
	# La petición se procesa en el servidor.
	# El servidor retorna un documento XML que contienen el resultado.
	# El objeto XMLHttpRequest llama a la función callback() y procesa el resultado.
	# Se actualiza el DOM (Document Object Model)de la página asociado con la
	petición con el resultado devuelto

Las ventajas de AJAX
--------------------

	* Mayor interactividad
	* Recuperación asíncrona de datos, reduciendo el tiempo de espera del usuario
	* Facilidad de manejo del usuario
	* El usuario tiene un mayor conocimiento de las aplicaciones de escritorio
	* Se reduce el tamaño de la información intercambiada
	* Portabilidad entre plataformas
	* No requieren instalación de complementos, applets de Java, ni ningún otro
	elemento
	* Código público

Las desventajas de AJAX
-----------------------

	* Usabilidad: Comportamiento del usuario ante la navegación
	* Botón de volver atrás del navegador
	* Empleo de iframes ocultos para almacenar el historial
	* Empleo de fragmento identificador del URL (‘#’) y recuperación mediante
	JavaScript
	* Problema al agregar marcadores/favoritos en un momento determinado de la
	aplicación
	* Problemas al imprimir páginas renderizadas dinámicamente
	* Tiempos de respuesta entre la petición del usuario y la respuesta del
	servidor
	* Empleo de feedback visual para indicar el estado de la petición al usuario
	* Requiere que los usuarios tengan el JavaScript activado en el navegador
	* En el caso de Internet Explorer 6 y anteriores, que necesita tener
	activado el ActiveX

.. note:: 

    terminar este tema

    A pesar de que el término «AJAX» fuese creado en 2005, la historia de las
    tecnologías que permiten AJAX se remonta a una década antes con la iniciativa de
    Microsoft en el desarrollo de Scripting Remoto. Sin embargo, las técnicas para
    la carga asíncrona de contenidos en una página existente sin requerir recarga
    completa remontan al tiempo del elemento iframe (introducido en Internet
    Explorer 3 en 1996) y el tipo de elemento layer (introducido en Netscape 4 en
    1997, abandonado durante las primeras etapas de desarrollo de Mozilla). Ambos
    tipos de elemento tenían el atributo src que podía tomar cualquier dirección URL
    externa, y cargando una página que contenga javascript que manipule la página
    paterna, pueden lograrse efectos parecidos al AJAX.
    
    El Microsoft's Remote Scripting (o MSRS, introducido en 1998) resultó un
    sustituto más elegante para estas técnicas, con envío de datos a través de un
    applet Java el cual se puede comunicar con el cliente usando JavaScript. Esta
    técnica funcionó en ambos navegadores, Internet Explorer versión 4 y Netscape
    Navigator versión 4. Microsoft la utilizó en el Outlook Web Access provisto con
    la versión 2000 de Microsoft Exchange Server.
    
    La comunidad de desarrolladores web, primero colaborando por medio del grupo de
    noticias microsoft.public.scripting.remote y después usando blogs, desarrollaron
    una gama de técnicas de scripting remoto para conseguir los mismos resultados en
    diferentes navegadores. Los primeros ejemplos incluyen la librería JSRS en el
    año 2000, la introducción a la técnica imagen/cookie[1] en el mismo año y la
    técnica JavaScript bajo demanda (JavaScript on Demand)[2] en 2002. En ese año,
    se realizó una modificación por parte de la comunidad de usuarios[3] al
    Microsoft's Remote Scripting para reemplazar el applet Java por XMLHttpRequest.
    
    Frameworks de Scripting Remoto como el ARSCIF[4] aparecieron en 2003 poco antes
    de que Microsoft introdujera Callbacks en ASP. NET.[5]
    
    Desde que XMLHttpRequest está implementado en la mayoría de los navegadores,
    raramente se usan técnicas alternativas. Sin embargo, todavía se utilizan donde
    se requiere una mayor compatibilidad, una reducida implementación, o acceso
    cruzado entre sitios web. Una alternativa, el Terminal SVG[6] (basado en SVG),
    emplea una conexión persistente para el intercambio continuo entre el navegador
    y el servidor.

JavaScript 1.7
==============

JavaScript en su versión 1.7, al contrario que su predecesores incorpra una serie de mejoras al
lenguaje como los generadores, los iteradores [MDCNew17JS09]_. 

.. [MDCNew17JS09] *New in JavaScript 1.7*, características nuevas de JavaScript 1.7, https://developer.mozilla.org/En/New_in_JavaScript_1.7


Iteradores
----------

Un generador es una

Generadores
-----------

Un generador es una función 




JSON
====

JSON [JSONOrg2009]_ (JavaScript Object Notation) es un estándard de codificación de datos, 
inspirado en la sintaxis de objetos de JavaScript.
Sus objetivos son: 

	* Ser legible para los humanos.
	
	* Fácil de interpretar para las computadoras.

Surge como alternativa a XML para el intercambio de datos en aplicaciones
web. 

.. [JSONOrg2009] *JSON*, Sitio Oficial del Estándard, último acceso Octubre de 2009, http://json.org/

Debido a que los navegadores carecen de la capacidad de ejecución de 
códiog JavaScript en forma concurrente, el bucle de despacho de eventos
debe competir con el resto de las tareas de la página. En una aplicación
interaciva que utiliza AJAX, una tarea común es el "parsing" de XML (de las
respuestas del servidor), 
que demanda un esfuerzo computacional que debe ser tenido en cuenta si se
debe realizar frecuentemente.

Los desarrolladores encontraron que formateando los datos como una cadena
literal para ser luego interpretada por la sentencia ``eval()`` [JSONOrgJS09]_, lograban desepeños
superiores a los de XML, además de contar con un formato de datos legibles de suma ayuda
a la hora de realizar depuración.

.. [JSONOrgJS09] *Utilización de JSON en Javascript*, Json.org, ultimo acceso Agosto de 2009, http://json.org/js.html

La sentecia ``eval()`` es considerada peligrosa 
[SimonWillson24Ways09]_, 
debido a que abre la posiblidad de 
inyección de código directa sobre el navegador, razón por la cual las librerías
de JavaScript comenzaron a brindar parsers serugros para JSON.

.. [SimonWillson24Ways09] http://24ways.org/2005/dont-be-eval

Actualmente algunos navegadores incorporan un parser nativo de JSON
[MozillaMDCJSONNativo09]_ [IEBlogNativeJSON09]_
, que 
incorpora checkeos de seguridad y un tiempo de respuesta corto. Algunas librerías
de JavaScript sacan provecho de este intérprete nativo [DaveWardEncosia2009]_.

.. [MozillaMDCNativeJSON09] https://developer.mozilla.org/en/Using_JSON_in_Firefox
.. [IEBlogNativeJSON09] http://blogs.msdn.com/ie/archive/2008/09/10/native-json-in-ie8.aspx


.. [DaveWardEncosia2009] Dave Ward, Improving jQuery’s JSON performance and security, Julio de 2009, http://encosia.com/2009/07/07/improving-jquery-json-performance-and-security/



.. Note:: 

    Iteradores

************
Google Gears
************

Introducción
============

Google Gears es un software de código abierto distribuido por Google que añade
una nueva capa de aplicación a los navegadores.

.. http://gears.google.com/ Sitio de google gears

Una vez instaldo como una extensión en el navegador, el producto agrega una API
que permite programar en JavaScript interacciones con los componentes que
contiene.

Los tres componentes principales que incorpora gears son:

    * Local Server

        Permite almacenar localmente datos correspondientes a las páginas webs.
        Tanto HTML, JavaScript e imágenes entre otros, pueden ser almacenados
        localmente por el cliente e interponerse entre el requerimiento del
        navegador al servidor en conslutas posteriores, evitando asi la
        solicitud HTTP y optimizando el tiempo de respuesta de la aplicacion.
        
        Pese a que su funcionamiento es muy similar al de la cache del navegador
        la diferencia fundamental esta en que la actualizacion de los recursos
        que almacena es mantenida y realizada por el desarrollador.
    
    * Database

        Permite almacenar localmente datos que no correspondan a una página web
        pero son parte de la logica de la aplicacion y requieren de un
        almacenamiento presistente.
        
        El motor de base de datos utilizado es SQLite con algunos agregados y
        restricciones para brindar seguridad y formas de busqueda.
 
        Luego de que el usuario de la aplicacion web otroge el permiso explicito
        de creacion de la base, el desarrollador, disponer de un almacenamiento
        del tipo relacional en la máquina huésped. 
    
    * Worker Pool

        De manera similar a los "hilos" del sistema operativo, el manejador de
        hilos permite ejecutar acciones en segundo plano sin bloquear la
        ejecución del hilo principal del navegador.

        Hay que destacar que el manejador no corre en forma paralela a la
        ejecución del navegador, sino que se ejecuta cuando la página web se
        mantiene activa, por lo cual el refresco de página o la salida de la
        misma provoca que este se detenga o no se ejecute directemente.

Basicamente Gears y sus principales componentes estan enfocados en permitir al
programador ejecutar sus aplicaciones cuando el navegador no está conectado
al servidor. El lider del grupo de desarrollo Bret Taylor dijo que buscaba ser
capaz de acceder al Google Reader mientras usaba la conexión de la compañía, la
cual frecuentemente tenia un acceso defectuoso a Internet.

.. http://bret.appspot.com/ Blog de Bret Taylor

Gears esta incluido en el nuevo navegador de Google (Google Chrome) y posee
extensiones para instalarse en Internet Explorer 6.0+, Mozilla Firefox, Safari y
Opera Mini, y funciona en los sistemas operativos Windows 2000, XP y Vista,
Windows Mobile 5 y 6, MacOS y Linux de 32 bits.

Con susecivos lanzamientos el producto sea visto mejorado y favorecido en varios
aspectos a partir de la versión 0.4 del Gears se puede hablar ya de:

    * API para GIS, que permite acceder a la posición geográfica del usuario.

    * El API Blob, que permite gestionar bloques de datos binarios.

    * Accede a archivos en el equipo cliente a través del API de Google Desktop.

    * Permite enviar y recibir Blobs con el API HttpRequest.

    * Localización de los cuadros de diálogo de Gears en varios idiomas.

    * API para canvas, que permite manipular imagenes desde JavaScript.

En todos los casos que se requiera tener instalada una aplicacion soportada por
Gears vale la pena aclarar que el cliente debe haber accedido al menos una vez
al servidor de la aplicacion web y otorgado los permisos de instalacion
correspondiente. 